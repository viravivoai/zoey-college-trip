<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gibbons Family NC College Tour</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
  :root {
    --coral: #E07B4C;
    --coral-light: #EDA07A;
    --blush: #F5DCC8;
    --blush-light: #FDF6F0;
    --sage: #7CB87C;
    --sage-light: #D4E8D4;
    --sky: #D6E6F2;
    --cream: #FFFDFB;
    --charcoal: #2D2D2D;
    --gray: #6B6B6B;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Poppins', -apple-system, sans-serif;
    background: var(--cream);
    color: var(--charcoal);
    line-height: 1.6;
  }
  
  /* Hero Section with Illustration */
  .hero {
    background: var(--cream);
    padding: 0 20px 40px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  .hero-illustration {
    width: 100%;
    max-width: 700px;
    margin: 0 auto 20px;
  }
  .hero-illustration img {
    width: 100%;
    height: auto;
    display: block;
  }
  .hero h1 {
    font-size: 28px;
    font-weight: 700;
    color: var(--charcoal);
    margin-bottom: 8px;
  }
  .hero p {
    font-size: 16px;
    color: var(--gray);
    margin-bottom: 16px;
  }
  .dates-badge {
    display: inline-block;
    background: var(--coral);
    color: #fff;
    padding: 10px 24px;
    border-radius: 50px;
    font-weight: 600;
    font-size: 14px;
  }
  
  .container { max-width: 900px; margin: 0 auto; padding: 32px 20px; }
  
  .card {
    background: #fff;
    border-radius: 20px;
    padding: 28px;
    margin-bottom: 24px;
    box-shadow: 0 4px 20px rgba(212, 114, 122, 0.1);
    border: 1px solid var(--blush);
  }
  .card-title {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 20px;
    color: var(--coral);
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .card-title .emoji { font-size: 24px; }
  
  /* Map */
  #map {
    height: 380px;
    border-radius: 16px;
    margin-bottom: 16px;
    border: 2px solid var(--blush);
  }
  .map-instruction {
    text-align: center;
    color: var(--gray);
    font-size: 13px;
    margin-bottom: 16px;
  }
  .leaflet-popup-content-wrapper { border-radius: 16px; padding: 0; }
  .leaflet-popup-content { margin: 0; min-width: 260px; }
  .popup-card { padding: 16px; }
  .popup-card .school-name { font-size: 16px; font-weight: 700; margin-bottom: 4px; color: var(--charcoal); }
  .popup-card .school-location { color: var(--gray); font-size: 12px; margin-bottom: 10px; }
  .popup-card .school-stats { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 10px; }
  .popup-card .stat-pill { background: var(--blush-light); padding: 4px 10px; border-radius: 20px; font-size: 11px; color: var(--charcoal); }
  .popup-card .tour-info { font-size: 12px; color: var(--gray); margin-bottom: 10px; line-height: 1.5; }
  .popup-card .tour-link {
    display: inline-block;
    padding: 8px 16px;
    background: var(--coral);
    color: #fff;
    text-decoration: none;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
  }
  .school-label {
    background: #fff;
    border: 2px solid var(--blush);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    padding: 6px 12px;
    font-size: 12px;
    font-weight: 600;
    color: var(--charcoal);
    border-radius: 20px;
  }
  .school-label::before { display: none; }
  
  /* Flights */
  .flight-section { margin-bottom: 20px; }
  .flight-section h4 {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 12px;
    color: var(--charcoal);
    padding-left: 4px;
  }
  .flights-table { width: 100%; border-collapse: collapse; font-size: 13px; }
  .flights-table th {
    text-align: left;
    padding: 10px 12px;
    background: var(--blush-light);
    font-weight: 600;
    color: var(--charcoal);
    border-radius: 8px 8px 0 0;
  }
  .flights-table th:first-child { border-radius: 8px 0 0 0; }
  .flights-table th:last-child { border-radius: 0 8px 0 0; }
  .flights-table td { padding: 10px 12px; border-bottom: 1px solid var(--blush); }
  .flights-table tr:hover { background: var(--blush-light); }
  .flights-table .airline { font-weight: 600; }
  .flights-table .price { font-weight: 700; color: var(--coral); }
  .flights-table .recommended { background: var(--sage-light); }
  .flights-table .recommended td:first-child::before { content: "‚≠ê "; }
  .badge-nonstop {
    display: inline-block;
    background: var(--sage);
    color: #fff;
    padding: 3px 10px;
    border-radius: 20px;
    font-size: 10px;
    font-weight: 600;
  }
  .badge-stop {
    display: inline-block;
    background: var(--blush);
    color: var(--charcoal);
    padding: 3px 10px;
    border-radius: 20px;
    font-size: 10px;
    font-weight: 600;
  }
  .flight-totals {
    background: var(--blush-light);
    border-radius: 12px;
    padding: 16px;
    margin-top: 16px;
  }
  .flight-totals h4 { font-size: 13px; font-weight: 600; margin-bottom: 10px; color: var(--charcoal); }
  .flight-totals ul { list-style: none; font-size: 13px; }
  .flight-totals li { padding: 4px 0; }
  .flight-totals .total-price { font-weight: 700; color: var(--coral); }
  
  /* Itinerary */
  .day { display: flex; gap: 16px; margin-bottom: 20px; }
  .day-badge { width: 80px; flex-shrink: 0; text-align: center; }
  .day-num {
    background: var(--coral);
    color: #fff;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: 700;
    margin: 0 auto 6px;
  }
  .day-date { font-size: 12px; color: var(--gray); }
  .day-content {
    flex: 1;
    background: var(--blush-light);
    border-radius: 16px;
    padding: 18px;
  }
  .day-title { font-size: 15px; font-weight: 700; margin-bottom: 12px; color: var(--charcoal); }
  .event {
    background: #fff;
    padding: 12px;
    border-radius: 12px;
    margin-bottom: 8px;
    display: flex;
    gap: 12px;
    align-items: flex-start;
  }
  .event:last-child { margin-bottom: 0; }
  .event-time {
    background: var(--sage);
    color: #fff;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 600;
    white-space: nowrap;
  }
  .event-desc { flex: 1; }
  .event-title { font-weight: 600; margin-bottom: 2px; font-size: 13px; }
  .event-note { font-size: 12px; color: var(--gray); }
  
  /* Hotels */
  .hotels-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 16px; }
  .hotel-card { background: var(--blush-light); border-radius: 16px; padding: 18px; }
  .hotel-name { font-size: 15px; font-weight: 700; margin-bottom: 4px; color: var(--charcoal); }
  .hotel-location { font-size: 13px; color: var(--gray); margin-bottom: 12px; }
  .hotel-why { background: #fff; padding: 12px; border-radius: 12px; font-size: 13px; }
  
  /* Tips */
  .tips-list { list-style: none; }
  .tips-list li {
    background: var(--blush-light);
    padding: 14px;
    border-radius: 12px;
    margin-bottom: 10px;
    display: flex;
    gap: 12px;
    align-items: flex-start;
  }
  .tips-list li:last-child { margin-bottom: 0; }
  .tip-emoji { font-size: 20px; flex-shrink: 0; }
  .tip-text { font-size: 13px; }
  .tip-text strong { color: var(--charcoal); }
  
  /* CTA */
  .cta-box {
    background: linear-gradient(135deg, var(--coral) 0%, var(--coral-light) 100%);
    border-radius: 16px;
    padding: 28px;
    text-align: center;
    color: #fff;
  }
  .cta-box h3 { font-size: 18px; margin-bottom: 8px; }
  .cta-box p { opacity: 0.9; margin-bottom: 20px; font-size: 13px; }
  .cta-links { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
  .cta-links a {
    background: #fff;
    color: var(--coral);
    padding: 10px 20px;
    border-radius: 25px;
    text-decoration: none;
    font-weight: 600;
    font-size: 13px;
    transition: transform 0.2s;
  }
  .cta-links a:hover { transform: scale(1.05); }
  
  .distance-note {
    background: var(--sage-light);
    border-left: 4px solid var(--sage);
    padding: 14px;
    border-radius: 0 12px 12px 0;
    font-size: 13px;
  }
  .distance-note strong { color: var(--charcoal); }
  .footer { text-align: center; padding: 32px; color: var(--gray); font-size: 13px; }
  a { color: var(--coral); }
  .note { margin-top: 16px; color: var(--gray); font-size: 13px; }
  .note a { color: var(--coral); }
  
  @media (max-width: 600px) {
    .hero h1 { font-size: 24px; }
    .day { flex-direction: column; gap: 12px; }
    .day-badge { width: auto; display: flex; align-items: center; gap: 12px; }
    .day-num { margin: 0; }
    .flights-table { font-size: 11px; }
    .flights-table th, .flights-table td { padding: 8px 6px; }
    .hero-illustration { height: 100px; gap: 12px; }
    .building-1 { width: 35px; height: 60px; }
    .building-2 { width: 50px; height: 85px; }
    .building-3 { width: 40px; height: 55px; }
    .building-2::before { font-size: 24px; top: -22px; }
  }
</style>
</head>
<body>

<div class="hero">
  <div class="hero-illustration">
    <img src="college-campus-wide.png" alt="College campus illustration">
  </div>
  <h1>The Gibbons Family College Tour</h1>
  <p>Miles, Melinda & Zoey explore North Carolina</p>
  <div class="dates-badge">‚úàÔ∏è March 12‚Äì15, 2026</div>
</div>

<div class="container">

  <!-- Route Map -->
  <div class="card">
    <div class="card-title"><span class="emoji">üó∫Ô∏è</span> The Route</div>
    <p class="map-instruction">Click a marker to see details</p>
    <div id="map"></div>
    <div class="distance-note">
      <strong>üöó Total Driving:</strong> RDU ‚Üí Wake Forest (1h 20m) ‚Üí Elon (50m) ‚Üí UNC (35m) ‚Üí RDU (25m)
    </div>
  </div>

  <!-- Flight Options -->
  <div class="card">
    <div class="card-title"><span class="emoji">‚úàÔ∏è</span> Flights (Roundtrip LAX ‚Üî RDU)</div>
    
    <div class="flight-section">
      <h4>Roundtrip Options (Mar 12‚Äì15)</h4>
      <table class="flights-table">
        <thead>
          <tr><th>Airline</th><th>Outbound</th><th>Return</th><th>Stops</th><th>Per Person</th></tr>
        </thead>
        <tbody>
          <tr class="recommended">
            <td class="airline">American</td>
            <td>9:41a ‚Üí 5:26p</td>
            <td>6:27p ‚Üí 9:16p</td>
            <td><span class="badge-nonstop">Nonstop</span></td>
            <td class="price">$548</td>
          </tr>
          <tr>
            <td class="airline">Delta</td>
            <td>8:35a ‚Üí 4:15p</td>
            <td>5:15p ‚Üí 7:56p</td>
            <td><span class="badge-nonstop">Nonstop</span></td>
            <td class="price">$637</td>
          </tr>
          <tr>
            <td class="airline">Delta</td>
            <td>1:25p ‚Üí 11:59p</td>
            <td>5:15p ‚Üí 7:56p</td>
            <td><span class="badge-stop">1 stop</span></td>
            <td class="price">$687</td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <div class="flight-totals">
      <h4>Total for 3 Passengers:</h4>
      <ul>
        <li>‚≠ê American (nonstop): <span class="total-price">$1,644</span></li>
        <li>Delta (nonstop): <span class="total-price">$1,911</span></li>
        <li>Delta (1 stop): <span class="total-price">$2,061</span></li>
      </ul>
    </div>
    
    <p class="note">üí° Prices as of Feb 3. <a href="https://www.google.com/travel/flights?q=flights%20from%20LAX%20to%20RDU%20March%2012%202026%20return%20March%2015%202026" target="_blank">Search on Google Flights ‚Üí</a></p>
  </div>

  <!-- Itinerary -->
  <div class="card">
    <div class="card-title"><span class="emoji">üìÖ</span> Itinerary</div>

    <div class="day">
      <div class="day-badge">
        <div class="day-num">1</div>
        <div class="day-date">Thu 3/12</div>
      </div>
      <div class="day-content">
        <div class="day-title">Travel Day ‚úàÔ∏è</div>
        <div class="event">
          <div class="event-time">9:41 AM</div>
          <div class="event-desc">
            <div class="event-title">Depart LAX</div>
            <div class="event-note">American nonstop ‚Üí arrive RDU 5:26 PM</div>
          </div>
        </div>
        <div class="event">
          <div class="event-time">6:00 PM</div>
          <div class="event-desc">
            <div class="event-title">Pick up rental car</div>
            <div class="event-note">Drive to Winston-Salem (~1h 20m)</div>
          </div>
        </div>
        <div class="event">
          <div class="event-time">7:30 PM</div>
          <div class="event-desc">
            <div class="event-title">Arrive Winston-Salem</div>
            <div class="event-note">Check in, grab dinner downtown</div>
          </div>
        </div>
      </div>
    </div>

    <div class="day">
      <div class="day-badge">
        <div class="day-num">2</div>
        <div class="day-date">Fri 3/13</div>
      </div>
      <div class="day-content">
        <div class="day-title">Wake Forest + Elon üéì</div>
        <div class="event">
          <div class="event-time">9:00 AM</div>
          <div class="event-desc">
            <div class="event-title">Wake Forest Info Session</div>
            <div class="event-note">Porter Byrum Welcome Center</div>
          </div>
        </div>
        <div class="event">
          <div class="event-time">10:00 AM</div>
          <div class="event-desc">
            <div class="event-title">Wake Forest Tour</div>
            <div class="event-note">90-min student-led walking tour</div>
          </div>
        </div>
        <div class="event">
          <div class="event-time">12:00 PM</div>
          <div class="event-desc">
            <div class="event-title">Lunch</div>
            <div class="event-note">Camino Bakery or Sweet Potatoes</div>
          </div>
        </div>
        <div class="event">
          <div class="event-time">2:30 PM</div>
          <div class="event-desc">
            <div class="event-title">Elon Campus Tour</div>
            <div class="event-note">Info session + tour (~2 hours)</div>
          </div>
        </div>
        <div class="event">
          <div class="event-time">5:00 PM</div>
          <div class="event-desc">
            <div class="event-title">Drive to Chapel Hill</div>
            <div class="event-note">Check in, explore Franklin Street</div>
          </div>
        </div>
      </div>
    </div>

    <div class="day">
      <div class="day-badge">
        <div class="day-num">3</div>
        <div class="day-date">Sat 3/14</div>
      </div>
      <div class="day-content">
        <div class="day-title">UNC Chapel Hill üíô</div>
        <div class="event">
          <div class="event-time">10:00 AM</div>
          <div class="event-desc">
            <div class="event-title">UNC Campus Visit</div>
            <div class="event-note">Welcome session + tour (~2 hours)</div>
          </div>
        </div>
        <div class="event">
          <div class="event-time">12:30 PM</div>
          <div class="event-desc">
            <div class="event-title">Lunch on Franklin Street</div>
            <div class="event-note">Restaurants, shops, college vibes!</div>
          </div>
        </div>
        <div class="event">
          <div class="event-time">Afternoon</div>
          <div class="event-desc">
            <div class="event-title">Free time</div>
            <div class="event-note">Explore campus, bookstore, coffee shops</div>
          </div>
        </div>
        <div class="event">
          <div class="event-time">Evening</div>
          <div class="event-desc">
            <div class="event-title">Dinner + debrief</div>
            <div class="event-note">Compare notes on all three schools!</div>
          </div>
        </div>
      </div>
    </div>

    <div class="day">
      <div class="day-badge">
        <div class="day-num">4</div>
        <div class="day-date">Sun 3/15</div>
      </div>
      <div class="day-content">
        <div class="day-title">Home üè†</div>
        <div class="event">
          <div class="event-time">Morning</div>
          <div class="event-desc">
            <div class="event-title">Sleep in, pack up</div>
            <div class="event-note">Leisurely breakfast</div>
          </div>
        </div>
        <div class="event">
          <div class="event-time">2:30 PM</div>
          <div class="event-desc">
            <div class="event-title">Drive to RDU</div>
            <div class="event-note">~25 min, return rental car</div>
          </div>
        </div>
        <div class="event">
          <div class="event-time">5:15 PM</div>
          <div class="event-desc">
            <div class="event-title">Depart RDU</div>
            <div class="event-note">Delta nonstop ‚Üí LAX 7:56 PM</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Hotels -->
  <div class="card">
    <div class="card-title"><span class="emoji">üè®</span> Hotels</div>
    <div class="hotels-grid">
      <div class="hotel-card">
        <div class="hotel-name">Night 1: Winston-Salem</div>
        <div class="hotel-location">üìç Near Wake Forest (Thu Mar 12)</div>
        <div class="hotel-why">
          ‚≠ê <a href="https://www.thecardinalhotel.com/" target="_blank"><strong>Kimpton Cardinal</strong></a> ‚Äî $196/night<br>
          <span style="font-size:11px;color:var(--gray);">Boutique, Art Deco, downtown</span><br><br>
          <a href="https://www.hilton.com/en/hotels/intwses-embassy-suites-winston-salem/" target="_blank">Embassy Suites</a> ‚Äî $198/night<br>
          <span style="font-size:11px;color:var(--gray);">Free breakfast, suites</span><br><br>
          <a href="https://www.marriott.com/en-us/hotels/intmc-winston-salem-marriott/" target="_blank">Marriott</a> ‚Äî $196/night<br>
          <span style="font-size:11px;color:var(--gray);">Downtown, reliable</span>
        </div>
      </div>
      <div class="hotel-card">
        <div class="hotel-name">Nights 2‚Äì3: Chapel Hill</div>
        <div class="hotel-location">üìç Near UNC (Fri-Sat Mar 13-14)</div>
        <div class="hotel-why">
          ‚≠ê <a href="https://www.hyatt.com/en-US/hotel/north-carolina/the-carolina-inn/rdudc" target="_blank"><strong>The Carolina Inn</strong></a> ‚Äî $578/night<br>
          <span style="font-size:11px;color:var(--gray);">ON campus! Historic, walkable</span><br><br>
          <a href="https://www.hilton.com/en/hotels/rduchhx-hampton-inn-and-suites-chapel-hill-carrboro-downtown/" target="_blank">Hampton Inn</a> ‚Äî $176/night<br>
          <span style="font-size:11px;color:var(--gray);">Near Franklin St, breakfast incl.</span><br><br>
          <a href="https://www.hilton.com/en/hotels/rduchup-home2-suites-chapel-hill/" target="_blank">Home2 Suites</a> ‚Äî $155/night<br>
          <span style="font-size:11px;color:var(--gray);">Kitchen, modern, good value</span>
        </div>
      </div>
    </div>
    <div class="flight-totals" style="margin-top:20px;">
      <h4>Estimated Hotel Totals (3 nights):</h4>
      <ul>
        <li>‚≠ê Splurge: Kimpton + Carolina Inn = <span class="total-price">$1,352</span></li>
        <li>Mid-range: Kimpton + Hampton Inn = <span class="total-price">$548</span></li>
        <li>Budget: Embassy + Home2 = <span class="total-price">$508</span></li>
      </ul>
    </div>
    <p class="note">üí° Prices for 3 adults, 1 room. <a href="https://www.booking.com/searchresults.html?ss=Chapel+Hill&checkin=2026-03-13&checkout=2026-03-15&group_adults=3" target="_blank">Search on Booking.com ‚Üí</a></p>
  </div>

  <!-- Tips -->
  <div class="card">
    <div class="card-title"><span class="emoji">üí°</span> Tips</div>
    <ul class="tips-list">
      <li><span class="tip-emoji">üì∏</span><span class="tip-text"><strong>Take photos & notes!</strong> Details blur after 3 schools.</span></li>
      <li><span class="tip-emoji">üëü</span><span class="tip-text"><strong>Comfy shoes.</strong> 1.5‚Äì2 hours walking per tour.</span></li>
      <li><span class="tip-emoji">‚ùì</span><span class="tip-text"><strong>Prepare questions.</strong> Class size? Greek life? Study abroad?</span></li>
      <li><span class="tip-emoji">üå¶Ô∏è</span><span class="tip-text"><strong>Pack layers.</strong> March in NC = 50s‚Äì70s.</span></li>
    </ul>
  </div>

  <!-- CTA -->
  <div class="card">
    <div class="cta-box">
      <h3>üìã Book Now!</h3>
      <p>Tour spots fill up fast</p>
      <div class="cta-links">
        <a href="https://apply.admissions.wfu.edu/portal/campustours" target="_blank">Wake Forest</a>
        <a href="https://admissions.elon.edu/portal/campus-visit" target="_blank">Elon</a>
        <a href="https://mycarolina.unc.edu/portal/visit" target="_blank">UNC</a>
        <a href="https://www.google.com/travel/flights?q=flights%20from%20LAX%20to%20RDU%20March%2012%202026%20return%20March%2015%202026" target="_blank">Flights</a>
      </div>
    </div>
  </div>

</div>

<div class="footer">
  Made with üíï for the Gibbons family
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const stops = [
  { num: 1, name: "RDU Airport", coords: [35.8776, -78.7875], type: "airport", info: "Arrive Wed, Depart Sat" },
  { num: 2, name: "Wake Forest", coords: [36.1339, -80.2769], type: "school", color: "#D4727A", location: "Winston-Salem, NC", stats: ["~5,500 students", "Top 30"], tour: "90-min walking tour", link: "https://apply.admissions.wfu.edu/portal/campustours" },
  { num: 3, name: "Elon University", coords: [36.1027, -79.5032], type: "school", color: "#8BB8A8", location: "Elon, NC", stats: ["~6,300 students", "#1 Study Abroad"], tour: "2-hour info + tour", link: "https://admissions.elon.edu/portal/campus-visit" },
  { num: 4, name: "UNC Chapel Hill", coords: [35.9049, -79.0469], type: "school", color: "#4B9CD3", location: "Chapel Hill, NC", stats: ["~20,000 students", "#1 Public"], tour: "2-hour campus visit", link: "https://mycarolina.unc.edu/portal/visit" }
];

const map = L.map('map').setView([35.95, -79.5], 8);
L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', { attribution: '¬©OpenStreetMap, ¬©CartoDB', maxZoom: 19 }).addTo(map);

// Decode OSRM polyline (Google's encoded polyline algorithm)
function decodePolyline(encoded) {
  const coords = [];
  let index = 0, lat = 0, lng = 0;
  while (index < encoded.length) {
    let b, shift = 0, result = 0;
    do { b = encoded.charCodeAt(index++) - 63; result |= (b & 0x1f) << shift; shift += 5; } while (b >= 0x20);
    lat += (result & 1) ? ~(result >> 1) : (result >> 1);
    shift = 0; result = 0;
    do { b = encoded.charCodeAt(index++) - 63; result |= (b & 0x1f) << shift; shift += 5; } while (b >= 0x20);
    lng += (result & 1) ? ~(result >> 1) : (result >> 1);
    coords.push([lat / 1e5, lng / 1e5]);
  }
  return coords;
}

// Fetch driving route from OSRM (free OpenStreetMap routing)
async function fetchDrivingRoute(waypoints) {
  const coordsStr = waypoints.map(p => `${p[1]},${p[0]}`).join(';');
  const url = `https://router.project-osrm.org/route/v1/driving/${coordsStr}?overview=full&geometries=polyline`;
  try {
    const response = await fetch(url);
    const data = await response.json();
    if (data.code === 'Ok' && data.routes[0]) {
      return decodePolyline(data.routes[0].geometry);
    }
  } catch (e) { console.error('Route fetch error:', e); }
  return null;
}

// Draw fallback straight lines (dashed, in case routing fails)
function drawFallbackRoute() {
  const routeCoords = stops.map(s => s.coords);
  routeCoords.push(stops[0].coords);
  L.polyline(routeCoords, { color: '#D4727A', weight: 3, opacity: 0.4, dashArray: '8, 8' }).addTo(map);
}

// Draw actual driving routes
async function drawDrivingRoutes() {
  const allWaypoints = stops.map(s => s.coords);
  allWaypoints.push(stops[0].coords); // Return to RDU
  
  const routeCoords = await fetchDrivingRoute(allWaypoints);
  
  if (routeCoords) {
    // Draw the actual highway route
    L.polyline(routeCoords, { 
      color: '#D4727A', 
      weight: 4, 
      opacity: 0.7,
      lineJoin: 'round',
      lineCap: 'round'
    }).addTo(map);
  } else {
    // Fallback to straight lines if routing fails
    drawFallbackRoute();
  }
}

// Initialize driving routes
drawDrivingRoutes();

stops.forEach(stop => {
  const bgColor = stop.type === 'airport' ? '#2D2D2D' : stop.color;
  const icon = L.divIcon({
    className: '',
    html: `<div style="width:28px;height:28px;background:${bgColor};color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px;border:3px solid #fff;box-shadow:0 2px 8px rgba(0,0,0,0.2);font-family:Poppins,sans-serif;">${stop.num}</div>`,
    iconSize: [28, 28], iconAnchor: [14, 14], popupAnchor: [0, -14]
  });
  
  let popup = stop.type === 'airport' 
    ? `<div class="popup-card"><div class="school-name">‚úàÔ∏è ${stop.name}</div><div class="tour-info">${stop.info}</div></div>`
    : `<div class="popup-card"><div class="school-name">${stop.name}</div><div class="school-location">üìç ${stop.location}</div><div class="school-stats">${stop.stats.map(s=>`<span class="stat-pill">${s}</span>`).join('')}</div><div class="tour-info">${stop.tour}</div><a href="${stop.link}" target="_blank" class="tour-link">Book Tour ‚Üí</a></div>`;
  
  L.marker(stop.coords, { icon }).addTo(map).bindPopup(popup, { maxWidth: 280 })
    .bindTooltip(stop.name, { permanent: true, direction: 'right', offset: [14, 0], className: 'school-label' });
});

map.fitBounds(L.latLngBounds(stops.map(s => s.coords)), { padding: [40, 40] });
</script>

</body>
</html>
